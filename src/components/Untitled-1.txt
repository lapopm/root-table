我来帮你封装一个功能完整的el-table组件。以下是关键代码和解释：

```vue:src/components/RootTable.vue
<template>
  <div class="root-table">
    <!-- 表格主体 -->
    <el-table
      ref="tableRef"
      v-bind="$attrs"
      :data="tableData"
      @selection-change="handleSelectionChange"
      @sort-change="handleSortChange">
      
      <!-- 多选列 -->
      <el-table-column v-if="showSelection" type="selection" width="55" />
      
      <!-- 展开行 -->
      <el-table-column v-if="expandable" type="expand">
        <template #default="scope">
          <slot name="expand" :row="scope.row"></slot>
        </template>
      </el-table-column>

      <!-- 动态列 -->
      <template v-for="col in columns" :key="col.prop">
        <el-table-column
          v-bind="col"
          :show-overflow-tooltip="true"
          :sortable="col.sortable || 'custom'">
          <!-- 自定义列内容 -->
          <template #default="scope" v-if="col.slot">
            <slot :name="col.slot" :row="scope.row"></slot>
          </template>
          <!-- 求和列 -->
          <template #footer v-if="col.showSum">
            {{ getSummaries(col.prop) }}
          </template>
        </el-table-column>
      </template>
    </el-table>

    <!-- 分页器 -->
    <el-pagination
      v-if="showPagination"
      v-model:current-page="currentPage"
      v-model:page-size="pageSize"
      :total="total"
      :page-sizes="[10, 20, 50, 100]"
      @size-change="handleSizeChange"
      @current-change="handleCurrentChange"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'

const props = defineProps({
  // 表格数据
  data: {
    type: Array,
    default: () => []
  },
  // 列配置
  columns: {
    type: Array,
    default: () => []
  },
  // 是否显示多选
  showSelection: {
    type: Boolean,
    default: false
  },
  // 是否可展开
  expandable: {
    type: Boolean,
    default: false
  },
  // 是否显示分页
  showPagination: {
    type: Boolean,
    default: true
  },
  // 总数据量
  total: {
    type: Number,
    default: 0
  }
})

const emit = defineEmits([
  'selection-change',
  'sort-change',
  'page-change'
])

// 表格实例
const tableRef = ref(null)

// 分页相关
const currentPage = ref(1)
const pageSize = ref(10)

// 计算分页后的数据
const tableData = computed(() => {
  if (!props.showPagination) return props.data
  const start = (currentPage.value - 1) * pageSize.value
  return props.data.slice(start, start + pageSize.value)
})

// 多选改变
const handleSelectionChange = (selection) => {
  emit('selection-change', selection)
}

// 排序改变
const handleSortChange = (sort) => {
  emit('sort-change', sort)
}

// 页码改变
const handleCurrentChange = (page) => {
  currentPage.value = page
  emit('page-change', { page, size: pageSize.value })
}

// 每页条数改变
const handleSizeChange = (size) => {
  pageSize.value = size
  emit('page-change', { page: currentPage.value, size })
}

// 计算合计
const getSummaries = (prop) => {
  const values = props.data.map(item => Number(item[prop]))
  return values.reduce((prev, curr) => prev + curr, 0)
}

// 暴露方法给父组件
defineExpose({
  tableRef,
  // 清除选择
  clearSelection: () => {
    tableRef.value?.clearSelection()
  },
  // 设置选中行
  toggleRowSelection: (row, selected) => {
    tableRef.value?.toggleRowSelection(row, selected)
  }
})
</script>

<style lang="scss" scoped>
.root-table {
  .el-pagination {
    margin-top: 20px;
    justify-content: flex-end;
  }
}
</style>
```

这个封装的表格组件包含以下主要功能：

1. **多选功能**：
   - 通过`showSelection`属性控制是否显示多选列
   - 提供`selection-change`事件
   - 暴露`clearSelection`和`toggleRowSelection`方法

2. **展开行**：
   - 通过`expandable`属性控制是否可展开
   - 使用具名插槽`expand`自定义展开内容

3. **排序功能**：
   - 支持通过`sortable`属性配置列排序
   - 提供`sort-change`事件

4. **分页功能**：
   - 支持页码和每页条数切换
   - 提供`page-change`事件

5. **自定义列**：
   - 通过`columns`配置列属性
   - 支持通过插槽自定义列内容

6. **求和功能**：
   - 通过列配置的`showSum`属性显示列合计

使用示例：

```vue
<template>
  <root-table
    :data="tableData"
    :columns="columns"
    :show-selection="true"
    :expandable="true"
    @selection-change="onSelectionChange"
    @sort-change="onSortChange"
    @page-change="onPageChange">
    
    <!-- 展开行插槽 -->
    <template #expand="{ row }">
      <div>展开行内容: {{ row.name }}</div>
    </template>
    
    <!-- 自定义列插槽 -->
    <template #action="{ row }">
      <el-button @click="handleEdit(row)">编辑</el-button>
    </template>
  </root-table>
</template>

<script setup>
const columns = [
  { prop: 'name', label: '姓名' },
  { prop: 'age', label: '年龄', sortable: true },
  { prop: 'amount', label: '金额', showSum: true },
  { prop: 'action', label: '操作', slot: 'action' }
]
</script>
```

如果需要树形表格，只需要在数据中添加`children`字段，并在`el-table`上添加`row-key`和`tree-props`属性即可。